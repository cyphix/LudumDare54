class_name Rocket
extends Area2D



signal player_win()



#===============================================================================
# Inspector Fields
#===============================================================================
@export var speed: float = 600



#===============================================================================
# Fields
#===============================================================================
#== Cached References
@onready var _sprite: Sprite2D = get_node("Sprite2D")

var _take_off: bool = false



#===============================================================================
# Node Methods
#===============================================================================
func _ready():
	if !body_entered.is_connected(_on_hit):
			body_entered.connect(_on_hit)
			
func _physics_process(delta):
	if _take_off:
		position.y -= speed * delta



#===============================================================================
# Methods
#===============================================================================



#===============================================================================
# Internal Methods
#===============================================================================



#===============================================================================
# Events
#===============================================================================
func _on_hit(body):
	if body is Player:
		(body as Player).hide()
		(body as Player).immortal(true)
		_sprite.frame = 1
		_take_off = true
		player_win.emit()
